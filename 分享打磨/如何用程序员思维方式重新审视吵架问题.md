# 如何用程序员思维方式重新审视吵架问题

我第一次打磨的时候，慧师给我讲了这样一个段子：

> 一位程序员的老婆叫他去买10个包子，如果看到西瓜的话，就买一个。结果这个程序员买了**一个包子**回家。

一个月后，我连续听了3遍的打磨录音，发现我当时完全没get 到笑点在哪里，我以为是需求的问题。换成是我，大概率也会买一个包子回回家。

你肯定会问，你们买个包子都这么不靠谱，程序员的思维方式能解决吵架这个问题吗？我不信！



这个我们先按下不说，花开两头，各表一枝：

我所在的这个行业叫IT行业，也就是信息技术行业。这个行业最为外界所知的是摩尔定律。它说的是：

## 摩尔定律

> 微处理器的性能每隔18个月提高一倍，或价格下降一半。

如果特斯拉电动车能符合摩尔定律，那么现在的一台100万的XXX，在20年后，大概就只值

摩尔定律是IT行业快速发展的底层动力，因为在其它任何行业，看不到这种指数级的增长。



## 阿姆达尔定律

但是一台计算机（包括手机），并不是只有处理器，还有内存、硬盘、屏幕等等各种各样的技术进步，

所以我们面临的挑战是：一个系统包括各种各样的改进方案，如何在资源有限的前提下，提升系统的**整体**效率。



既然讲到优化，我们面临的第一个问题是如何度量优化，显而易见的是，没有度量就不会有改进。

### 如何表示相对性能

S = T[old] / T[new]

例如，原来执行一段程序的时间T old需要4.5秒，现在优化后T[new]只需要3秒，那么提升的倍速Speedup就是1.5倍，澄清一下语言上可能的歧义，改进代表着这个S的值大于1.

### 阿姆达尔公式

我们接下来看一下，改进一个局部，如何影响整体的性能。请注意，接下来会动用到小学的数学知识，请跟上我的思路。

假设：CPU占整体性能的60%，内存占20%，其它因素占20%。

现在有种技术，能够内存的性能提高了5倍，那么对整体性能的改进是多少？

新系统的性能需要花的时间T[new] = (1 - 20%) * T[old] + 20%* T[old] / 5 = T[old] * ((1-20%) +20%/5) 

可以得到，提升的效率为：T[old] / T[new] = 1.19



那你猜猜看，如果我们把CPU的效率提升1.5倍，和将内存性能提升5倍的技术相比，优先选择那个？

S = 1/(1-0.6)+0.6/1.5 = 1.25。



现在经过优化之后，CPU占整体性能的50%，内存占30%，其它因素占20%。一年后，还有这两种技术，CPU提升1.5倍，内存提升5倍，应该选择哪个技术？通过计算，两种方案对提醒的提升分别如下：

内存：1.31

CPU：1.20

这个时候应该优先选择改进内存的技术。



所有的技术看起来似乎都在恰当的时候被优化了，其实是IT行业遵循这拉姆达尔法则在优化计算机系统整体的性能。

如果说，摩尔定律为IT行业提供了方向，那么阿姆达尔定律则提供了前行的路径。





那我是怎么理解阿姆达尔定律呢？

1. 当下最重要的事情只有一件

2. 一个难题解决之后，就会有另一个难题冒出来

   

我为什么会这么理解阿姆达尔定律，两个原因

1. 被打磨教练“逼”的，选题一定要考虑听众为什么花8分钟来听你的分享。

2. 最近跟我老婆吵架了，我用阿姆达尔定律的视角来重新审视过往种种，似乎摸到了解决方法的门道

    

   我们说回我这个程序员的不靠谱

   

## 重新审视吵架过程

我们从大学谈恋爱的第二周就发生了第一次争吵。有多能吵呢，我们原定是2013年5月20号去领证，结果好死不死领证前一天又吵架了，那天硬是没领成证，一直拖到了6月21号。我只好跟双方父母解释说，比520再多爱一点点。写逐字稿的时候，我突然发现我在6期2班1组，天啊。

回顾我们吵架的过程，我发现分为几个阶段

1. 你一点不关心我，你不爱我

   程序员的女朋友生病了，好像程序员做的最多的事情就是让她多喝水。其它的什么都没有。

2. 我生气并不是因为这件事，而是你的态度

   我老婆怀孕之后突然发现小区的附近有个通信基站，就决定要搬家。我google一下，都说没什么问题。我试图跟她说国家标准、辐射原理，但是都没用。最后，一番恶战之后，一位60多岁叫兰马生的老人给我讲了一个道理：

   “永远不要在吵架的时候跟你老婆讲道理”

   ​		                                                 -- 兰马生

   嗯，这个人你肯定不认识。是我岳父，多么言辞恳切、推心置腹又多么痛的领悟。

3. 谈钱伤感情

   吵的最凶的一次是有一次大概是快4年前，那时我刚来深圳，给了我弟1万五让他去报了一门编程课。

   经过多次协商和谈判，我们建立了家庭公共基金制度，按照各自比例交公，剩下的自己当零花钱，原则上彼此不过问。这样就基本上解决了我们的经济上的争执。



“从此王子和公主过上了的幸福生活了吗？”，大家是知道得到分享的套路的，当然没有，这是成年人的现实世界。就在半个月前，她转了两万块给我，跟我说，你搬出去吧。嗯？也许你闻到了八卦的气息。

我想说的重点是，把我和我老婆的关系当做一个待优化的问题，

1. 每个当下，最重要的事情只有一件，。

2. 解决一个难题后，会有新的难题冒出来

   但就是在这些难题的解决过程中，我们变成了更好的自己。

   

嗯，还有点时间：

### 数据很重要

我还有个观察，吵架的时候，她秒变成了记忆大师，清楚得记得从大学里牵手那一天开始算起到现在我犯过的每一个错误，所以，每次吵架的时候，我都感觉自己是一把手枪对着一挺机关枪。最后还总有个灵魂拷问：”你什么时候对我好过啦？“

穷则思变，在某个阳光灿烂的日子，我们签订一个“停火协议”，最重要的一条内容是，错误的有效追溯期只有半年。

我也学聪明了，例如这次的7周年纪念日，我会在小本本里偷偷记上：”红酒一瓶，蛋糕一个，鲜花一束，荔枝园一日游“

我这两个月状态不太好，如果我能拿出数据跟她说，虽然现在的我有很大的改进空间，但比起去年此时的我已经提升了6.21%，我想我老婆也就不会赶我出门了。这是我努力的方向。

所以，我慎重的提醒各位，数据很重要，要拿数据说话。

## 结尾

现在你知道，为什么程序员只买一个包子了吧，因为重要的事情只有一件。

借用胡适先生的一句话：“怕什么困难不断，解决一个有一个的欢喜。” 但是在动手之前，请记住，有一个叫“阿姆达尔”的定律。

我来自1组的陈文经，一个有着一头短发的程序员。





## 裁剪的材料

---



通常黑我们程序员是从头发开始的，比如你看看这是C++编程语言之父，这是Java编程语言之父，这是。。这个名单还很长，对此，我是不屑一顾的，虽然我头发短，但都还健在。

那应该怎么做呢？你可能会脑补，某某程序员往地板上的键盘一跪，说：”老婆，我错了，虽然我不知道我错在哪里，但是我一定错了，下次再也不敢了。“ 虽然这哥们认错的姿势有点难看，但是态度是上道的。这种事只在网剧里，我当然不会怎么做了，要不，夜深人静，写代码写逐字稿的时候，叫我如何面对这位一同战斗的键盘兄弟？



## 备注

摩尔定律的三个版本

1. 集成电路上可容纳的晶体管数目，约每18个月翻一番。積
2. 微处理器的性能每隔18个月提高一倍，或价格下降一半。
3. 相同價格所买的电脑，性能每隔18个月增加一倍。

