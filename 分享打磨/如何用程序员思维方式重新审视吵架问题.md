# 如何用程序员思维方式重新审视吵架问题

有这么一个段子：

> 一位程序员的老婆叫他去买10个包子，如果看到西瓜的话，就买一个。结果这个程序员只买了**一个包子**回家。

我就是一名程序员。

你肯定会质疑：买个包子都这么不靠谱，你们的思维方式能解决吵架这个问题吗？我不信。



且听我从头说起，

我所在的这个行业叫IT行业，也就是信息技术行业。这个行业最为外界所知的是摩尔定律。它说的是：

## 摩尔定律

> 微处理器的性能每隔18个月提高一倍，或价格下降一半。

如果电动车能符合摩尔定律，那么现在的一辆20万美元的特斯拉Roadste顶级r跑车，在20年后，大概就只值20美元，一顿牛肉火锅的钱。

摩尔定律是IT行业快速发展的底层动力，因为在其它任何行业，看不到这种指数级的增长。



## 阿姆达尔定律

但是一台计算机（包括手机），并不是只有处理器，还有内存、硬盘、屏幕等等各种各样的技术进步，所以对内行来说，面临的挑战是：

> 一个系统包含各种各样的改进方案，如何在资源有限的约束下，提升系统的**整体**效率。



没有度量，就不会有改进。

我们如何度量一个部件的改进对整体效率的提升的，这就要说到与摩尔定律并驾齐驱、但是基本上只有内行才知道的

### 阿姆达尔公式

S = 1 / (1-a) + a/k

虽然这个公式的推导过程只需要动用小学四年级的数学知识，但是我实在没办法在半分钟内推导完成，我们直接看例子。

在一台计算机中，CPU对整体性能的影响是60%，内存20%。现在有成本一样的两项技术，

1. 内存性能提高5倍
2. CPU性能提升1.5倍

只能选一个，你会优先选哪个？

这是结果：

内存：1.19

CPU：1.25

是不是有点违反直觉？



如果优化后，CPU占整体性能的50%，内存占30%，还是这两项技术，这时怎么选？

内存：1.31

CPU：1.20



怎么理解这个定律呢，好比要提高一个班级的总成绩，你会优先盯着成绩最差的同学，因为他们改进的空间最大，对整体贡献最大。[找个更好的例子]



所以，IT行业很多技术看起来似乎都在恰当的时候被改进了，其实它们都遵循着阿姆达尔定律。如果说摩尔定律为IT行业提供了方向，那么阿姆达尔定律则提供了前行的路径。



那这个跟吵架有什么关系呢？我们说回程序员的不靠谱！

## 重新审视吵架过程

我和我爱人在06年11月29日第一次牵手，第二周就发生了争吵。经过7年风雨，我们原计划在2013年520号去领证，然而前一天又吵架了，一直拖到了6月21号才领了证。

我只好跟双方父母解释说，621比520再多爱一点点，只有我们俩自己知道那一点点意味着什么。



回顾我们吵架的过程，跳过早期“你不关心我，你不爱我”的婴幼儿阶段，我发现有两个里程碑

1. 我生气并不是因为这件事，而是你的态度

   怀孕之后她突然发现小区附近有个通信基站，就决定要搬家。我google之后，试图跟她说国家标准、通讯原理、辐射剂量。一番恶战之后，一位60多岁的老人给我讲了一个朴素的道理：

   “永远不要在吵架的时候跟你老婆讲道理”

   ​		                                                 -- 兰马生

   嗯，你肯定不认识兰马生。他是我岳父，多么言辞恳切、推心置腹又多么痛的领悟。

   关于态度问题，你脑袋里可能会有这样的画面，某某互联网公司的程序员往地板上的键盘一跪，说：”老婆，我错了，虽然我还不知道错在哪里，但是一定是哪里错了。“ 

   我想说的是，真正的程序员是不会这么做的，特别是得到大学的程序员。要不，在夜深人静调代码、写逐字稿的时候，叫我如何面对一起战斗的键盘兄弟。

2. 谈钱伤感情

   吵的最凶的一次是在2016年，那时我刚来深圳几个月，给了我弟1万五让他去报了一门编程课。结果差点因此领了离婚证。

   经过多次谈判，我们成立了家庭公共基金，按照各自比例交公，剩下的自己决定，原则上彼此不过问。终于解决了我们的经济纠纷。



从此我们就过上了童话一样幸福生活吗？当然没有，这个台上分享的套路大家是知道的。就在半个月前，她转了两万块给我，要把我赶出家门。嗯？也许你闻到了八卦的气息。

但我想说的重点是，把我们俩的关系当做一个待优化的难题，根据阿姆达尔定律：

1. 每个当下，最重要的事情只有一件。 讲道理我做错了，公共基金我做对了。

2. 解决一个难题后，就会有新的难题冒出来。

   而这，正是我们成为更好的自己的道路。

### 数据很重要

我还有个观察，虽然她记不住我的生日，吵架的时候，能清楚得记得从第一次牵手那个晚上开始我犯过的每一个错误，所以每次吵架，我都感觉自己是一把步枪对着一挺机关枪，我还没瞄准，已经被扫成了窟窿。最后还有个那时无法回答的灵魂拷问：”你说，你什么时候对我好过？“

终于我们达成了一个“停火协议”，最重要的一条就是：错误的有效追溯期只有6个月。（之所以是6个月而不是半年，是因为6个月看起来比半年要长。）

我也学聪明了，例如这次的7周年纪念日，我会在小本本里偷偷记上：”红酒一瓶，鲜花一束“。

这两三个月我的个人状态并不好，如果我能拿出数据跟她说，虽然我现在很糟糕，但比起低谷的时候提升了6.21%，我想我老婆也就不会赶我出门了。嗯，这是我努力的方向。

所以，我慎重的提醒各位，数据很重要，有度量才有优化。多么痛的领悟！

## 结尾

现在你知道，为什么程序员只买了一个包子了吧，因为重要的事情只有一件。

借用胡适先生的一句话：“怕什么困难不断，解决一个有一个的欢喜。” 但是在动手之前，请一定记住，有一个叫“阿姆达尔”的定律。

我是陈文经，一个不靠谱的程序员，来自6期2班1组，又是621，巧合地有点诡异。







## 裁剪的材料

~~~
### 如何表示相对性能

S = T[old] / T[new]

例如，原来执行一段程序的时间T old需要4.5秒，现在优化后T[new]只需要3秒，那么提升的倍速Speedup就是1.5倍，澄清一下语言上可能的歧义，改进代表着这个S的值大于1.



那我们是如何定量评估一项改进对整体的作用有多大呢？这就要说道阿姆达尔定律了。

~~~

~~~
顺便插一句，我在交完逐字稿之后，突然发现我在6期2班1组，天啊。
~~~



~~~
之所以是6个月而不是半年，是因为6个月看起来比半年长）
~~~



~~~
为了这次分享，我把我和我老婆的黑历史都翻出来了，做个分享真是不容易啊。我现在关心的不是拉票问题，而是回家之后迎接我的是键盘、搓衣板还是一个拥抱。我第一次打磨到第二次打磨之间隔了一个月，N次相关放弃。要拉票的话，我想最后拉一下还没打磨过的同学，被打磨是不是一个容易的事情。但是让自己变得更好的事情从来就不容易。来吧，还有一次机会。
~~~

