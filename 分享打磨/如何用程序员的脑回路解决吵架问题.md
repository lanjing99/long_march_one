# 如何用程序员的脑回路解决吵架问题

各位学长、各位同学下午好，我今天分享的题目是：“如何用程序员的脑回路解决吵架问题”。

有个段子这么说的：

> 有位程序员的老婆叫他去买10个包子，如果看到西瓜的话，就买一个。

你猜，结果是啥？这哥们**只买了一个包子**回家。

我就是一名程序员，把他的脑回路转换成代码是这样的：

```Swift
if (seeWaterMelon)  					//如果看到西瓜，
		buyOneBread()  			 		  //买一个包子，这里出错了（有个bug）
else
	 	buyTenBreads()      			//买十个包子
```

正确的代码应该是这样的

```swift
buyTenBreads()      			//买十个包子
if (seeWaterMelon)  			//如果看到西瓜，
		buyOneWaterMelon()  			//买一个西瓜
```



你肯定会想：“买个包子都这么不靠谱，你分享的题目应该改成：“如何用程序员的脑回路引发一场吵架？” 你确定你们的脑回路没有短路？”

你这么想就对了，为了说明程序员的是如何思考和解决问题的，我们来做一道需要动用小学四年级数学知识的算术题。

>在一台计算机中，CPU对整体性能的影响是60%，内存是20%。下面两种技术那种对系统性能提升幅度更大？
>
>1. 内存性能提高**5**倍
>2. CPU性能提升**1.5**倍
>

不知道怎么算的同学，要问一下小学体育老师

> 计算的结果是：
>
> 内存：1.19 倍
>
> CPU：1.25 倍
>

是不是有点违反直觉？

> 如果优化后，CPU占整体性能的50%，内存占30%，还是这两项技术，这时那个更好？
>
> 内存：1.31 倍
>
> CPU：1.20 倍

其实，这个题算不出来，怪不到小学数学老师头上。虽然它只动用了小学四年级的数学知识，但背后却是整个IT行业解决问题的深刻洞察。这就是与摩尔定律同等重要，但基本上只有内行才知道的阿姆达尔定律。

>阿姆达尔定律
>
>S = 1 / (1-a) + a/k

用于定量的衡量一个局部的改进对整体的影响有多大。

再举个例子，我使用苹果的iPhone，macbook笔记本有个观察，它的CPU配置往往不是市面上最高的，但是却比Android，Windows更流畅，我的iPhone 6s、macbook 已经用了5年了，很难想象Android和Windows用了5年会怎样。说明苹果公司对整体的性能优化的更好。



那这个跟吵架有什么关系呢？我们说回程序员的脑回路。

## 我们的吵架历史

时间回到2006年的11月29日，我和我老婆第一次牵手，那时太年轻，第二周就因为”“你不关心我”的原因吵架了。历经7年的风风雨雨，我们原计划在2013年520那天去领证，然而前一天又吵架了，一直拖到了6月21号才领的证。

我只好跟双方父母解释说，621比520再多爱一点点，只有我知道那一点点是什么。



## 最重要的事情只有一件

回顾我们吵架的过程，跳过早期“你不关心我，你不爱我”的婴幼儿阶段，我发现有两个里程碑事件，第一个是

>  我生气并不是因为这件事，而是你的态度

在她怀孕之后，突然发现小区附近有个通信基站，就决定要搬家。我google了半天之后，跟她讲国家标准、辐射剂量、通讯原理并没什么用之后，一位60多岁的小学语文老师给我讲了一个亲测有效的道理：

“永远不要在吵架的时候跟你老婆讲道理”

​		                                                 -- 兰马生

嗯，你肯定不认识他，是我岳父。

在这里，我想说的是：最重要的事情只有一件。

显然，这个时候，态度好比讲道理更重要。



## 难题过后会有新的难题

第二件

> 谈钱伤感情

吵得最凶的一次是在2016年，我给了我弟1万五让他去报了一门编程课。新仇旧恨加在一起，差点因此领了离婚证。战争场面就不描述了，经过多次谈判，我们成立了家庭公共基金，按照各自比例交公，剩下的彼此不过问，终于解决了经济纠纷问题。从此我们就过上了幸福生活吗？当然没有，这个台上分享的套路大家是知道的。就在半个月前，她转了两万块给我，要把我赶出家门。嗯？有八卦？不是。

在这里，我想说的是：难题过后会有新的难题。



##知识就在一次搜索之外

你可能会问，不要跑题，就吵架本身，是怎么解决的？我翻遍计算机原理，算法，设计模式、代码大全都找不到答案。从另外一个侧面说明老婆远比计算机复杂。阿姆达尔定律也只能告诉你，问题的瓶颈是CPU还是内存，但并没有告诉你怎么制造和优化CPU啊。怎么办？IT这个行业知识更新太快了，你看得到App，恨不得一周发布一个版本。被生活所迫，我养成了一个习惯，外事不明问Google，内事不明找得到。在得到上输入“吵架”这两个关键字，课程和锦囊一起带走。

[ppt 展示得到搜索结果]

在这里，我想说的是：”我不是得到App的托“，

喔，不对，我想说的是：知识就在一次搜索之外。



## 有数据度量才会有优化

我还有个观察，虽然她经常记不住我的生日，吵架的时候，却能清楚得记得从第一次牵手那个晚上开始到现在我犯过的每一个微小的错误，所以每次吵架，我都感觉自己拿着把步枪对着一挺机关枪，我还没瞄准，她就突突突突，我就已经含恨倒下了。最后还有个灵魂拷问在空中飘荡：”你说，你什么时候对我好过？“

终于我们达成了一个“停火协议”，最重要的一条就是：错误的有效追溯期为180天。之所以是180天而不是半年，是因为180天看起来比半年要长。

我也学聪明了，例如这次的7周年纪念日，我在小本本里偷偷记上了：”红酒一瓶，鲜花一束，吃火锅、看日食“。

春节后我被公司裁员了，到现在都没投简历，所以这几个月并不好过，如果我能拿出数据跟她说，虽然我现在很糟糕，但比起低谷的时候提升了6.21%，我想她也就不会赶我出家门了。嗯，这是我努力的方向。

在这里，我想说的是：有数据度量才会有优化



## 结尾

到此，我将我毕生程序员所学解决问题的脑回路在这8分钟内交付给你。

【ppt展示】

最重要的事情只有一件

难题过后会有新的难题

知识就在一次搜索之外

有数据度量才会有优化



最后，我想说的是：别太相信程序员的脑回路，小心短路。

我是陈文经，一个不靠谱的程序员，来自6期2班1组，又是621，巧合得有点神奇。





## 裁剪的材料

~~~
### 如何表示相对性能

S = T[old] / T[new]

例如，原来执行一段程序的时间T old需要4.5秒，现在优化后T[new]只需要3秒，那么提升的倍速Speedup就是1.5倍，澄清一下语言上可能的歧义，改进代表着这个S的值大于1.



那我们是如何定量评估一项改进对整体的作用有多大呢？这就要说道阿姆达尔定律了。

~~~

~~~
顺便插一句，我在交完逐字稿之后，突然发现我在6期2班1组，天啊。
~~~



~~~
之所以是6个月而不是半年，是因为6个月看起来比半年长）
~~~



~~~
为了这次分享，我把我和我老婆的黑历史都翻出来了，做个分享真是不容易啊。我现在关心的不是拉票问题，而是回家之后等着我的是键盘、搓衣板还是一顿好酒好菜。
我第一次打磨到第二次打磨之间隔了整整一个月，N次想放弃。感谢夏大叔，盘教练、劲捷老熊表叔三刷和二刷的榜样，感谢班班的督促，感谢我们长征1号小组晓林、杜鹃、寇椿的榜样作用，还有一起撑到最后的哲昊和志威，特别是志威。我们几乎成了难兄难弟，我终于过了自己这一关，还有下一个挑战等着，看你的了。
想给晓雨转个话：“相信我，你并不孤独。”，虽然我没产后，但是遇到跟你一样的挑战。加油，期待你的分享！

没时间啦，还有最后一次打磨机会，逐字稿的同学们加油，你值得拥有！
~~~



~~~
关于态度问题，你脑袋里可能会有这样的画面，某某互联网公司的程序员往地板上的键盘一跪，说：”老婆，我错了，虽然我还不知道错在哪里，但是一定是哪里错了。“

我想说的是，真正的程序员是不会这么做的，特别是得到大学的程序员。要不，在夜深人静调代码、写逐字稿的时候，叫我如何面对一起战斗的键盘兄弟。但这哥们的态度是好的。
~~~



~~~
阿姆达尔定律

S = 1 / (1-a) + a/k

虽然这个公式的推导过程只，但是我实在没办法在半分钟内完成演示，我们直接看例子。

~~~



~~~
关于态度问题，网剧里可能会有这样的情节，某程序员往地板上的键盘扑通一跪，说：”老婆，我错了，虽然我还不知道错在哪里，但是一定是哪里错了。“ 这段台词年轻的时候我用过，虽然那时是个人都看得出来我说得很违心，但她依旧很开心，这个女人真是个奇怪的动物。你可能好奇的是，键盘跪了没有？当然没有了，要不，在夜深人静调代码、写逐字稿的时候，叫我如何面对一起战斗的键盘兄弟。
~~~

